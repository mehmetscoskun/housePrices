{"ast":null,"code":"import _regeneratorRuntime from \"/home/mehmet/Desktop/HackYourFuture/React/homework-submission/week1-react/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mehmet/Desktop/HackYourFuture/React/homework-submission/week1-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _initializerDefineProperty from \"/home/mehmet/Desktop/HackYourFuture/React/homework-submission/week1-react/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"/home/mehmet/Desktop/HackYourFuture/React/homework-submission/week1-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mehmet/Desktop/HackYourFuture/React/homework-submission/week1-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _applyDecoratedDescriptor from \"/home/mehmet/Desktop/HackYourFuture/React/homework-submission/week1-react/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/home/mehmet/Desktop/HackYourFuture/React/homework-submission/week1-react/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8;\n\nimport { observable, action, runInAction } from 'mobx'; // import todos from '../component/todos.json';\n// mobx.configure({enforceActions: true});\n\nvar todoApp = (_class =\n/*#__PURE__*/\nfunction () {\n  function todoApp() {\n    _classCallCheck(this, todoApp);\n\n    _initializerDefineProperty(this, \"data\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"idToUpdate\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"wrongInput\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"changeDone\", _descriptor4, this);\n\n    _initializerDefineProperty(this, \"addNewTodo\", _descriptor5, this);\n\n    _initializerDefineProperty(this, \"deleteTodo\", _descriptor6, this);\n\n    _initializerDefineProperty(this, \"editButton\", _descriptor7, this);\n\n    _initializerDefineProperty(this, \"updateTodo\", _descriptor8, this);\n  }\n\n  _createClass(todoApp, [{\n    key: \"listTodos\",\n    value: function () {\n      var _listTodos = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.data.todos = [];\n                this.data.status = 'loading';\n                _context.prev = 2;\n                _context.next = 5;\n                return this.getItems();\n\n              case 5:\n                data = _context.sent;\n                runInAction(function () {\n                  _this.data.todos = data;\n                  _this.data.status = 'done';\n                });\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](2);\n                runInAction(function () {\n                  _this.data.status = 'error';\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 9]]);\n      }));\n\n      return function listTodos() {\n        return _listTodos.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getItems\",\n    value: function getItems() {\n      return fetch('https://hyf-react-api.herokuapp.com/todos').then(function (response) {\n        return response.json();\n      });\n    }\n  }, {\n    key: \"createNewItem\",\n    value: function createNewItem(item) {\n      return fetch('https://hyf-react-api.herokuapp.com/todos/create', {\n        method: 'POST',\n        body: JSON.stringify(item),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      }).then(function (response) {\n        return response.json();\n      });\n    }\n  }, {\n    key: \"patchItem\",\n    value: function patchItem(id, item) {\n      return fetch(\"https://hyf-react-api.herokuapp.com/todos/\".concat(id), {\n        method: 'PATCH',\n        body: JSON.stringify(item),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      }).then(function (response) {\n        return response.json();\n      });\n    }\n  }, {\n    key: \"deleteItem\",\n    value: function deleteItem(id) {\n      return fetch(\"https://hyf-react-api.herokuapp.com/todos/\".concat(id), {\n        method: 'DELETE'\n      });\n    }\n  }]);\n\n  return todoApp;\n}(), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"data\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {\n      todos: [],\n      status: 'loading'\n    };\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"idToUpdate\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"wrongInput\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class.prototype, \"listTodos\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"listTodos\"), _class.prototype), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"changeDone\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this2 = this;\n\n    return function (id) {\n      _this2.data.status = 'loading';\n\n      var index = _this2.data.todos.findIndex(function (item) {\n        return item._id === id;\n      });\n\n      var newDone = {\n        done: !_this2.data.todos[index].done\n      };\n\n      _this2.patchItem(id, newDone).then(function () {\n        runInAction(function () {\n          _this2.data.todos[index].done = newDone.done;\n          _this2.data.status = 'done';\n        });\n      });\n    };\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"addNewTodo\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this3 = this;\n\n    return function (newEntry) {\n      var dateRegExp = /^\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;\n\n      if (newEntry.description === '' || !dateRegExp.test(newEntry.deadline)) {\n        _this3.data.wrongInput = true;\n      } else {\n        _this3.data.status = 'loading';\n\n        _this3.createNewItem(newEntry).then(function () {\n          runInAction(function () {\n            var lastItemId = _this3.data.todos[_this3.data.todos.length - 1].id;\n            newEntry.id = lastItemId + 1;\n            newEntry.deadline = new Date(newEntry.deadline).toJSON();\n\n            _this3.data.todos.push(newEntry);\n\n            _this3.data.status = 'done';\n            _this3.wrongInput = false;\n          });\n        });\n      }\n    };\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"deleteTodo\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this4 = this;\n\n    return function (index) {\n      _this4.data.todos.splice(index, 1);\n    };\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class.prototype, \"editButton\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this5 = this;\n\n    return function (id) {\n      _this5.idToUpdate = id;\n    };\n  }\n}), _descriptor8 = _applyDecoratedDescriptor(_class.prototype, \"updateTodo\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this6 = this;\n\n    return function (select, id, newEntry) {\n      if (select === 'cancel') {\n        _this6.idToUpdate = -1;\n      } else {\n        _this6.data.status = 'loading';\n\n        var index = _this6.data.todos.findIndex(function (item) {\n          return item._id === id;\n        });\n\n        _this6.patchItem(id, newEntry).then(function () {\n          runInAction(function () {\n            _this6.data.todos[index].description = newEntry.description;\n            _this6.data.todos[index].deadline = newEntry.deadline;\n            _this6.data.status = 'done';\n          });\n        });\n\n        _this6.idToUpdate = -1;\n      }\n    };\n  }\n})), _class);\nvar myTodoApp = new todoApp();\nexport default myTodoApp;","map":{"version":3,"sources":["/home/mehmet/Desktop/HackYourFuture/React/homework-submission/week1-react/src/store/todoApp.js"],"names":["observable","action","runInAction","todoApp","data","todos","status","getItems","fetch","then","response","json","item","method","body","JSON","stringify","headers","id","index","findIndex","_id","newDone","done","patchItem","newEntry","dateRegExp","description","test","deadline","wrongInput","createNewItem","lastItemId","length","Date","toJSON","push","splice","idToUpdate","select","myTodoApp"],"mappings":"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","sourcesContent":["import {observable, action, runInAction} from 'mobx';\n// import todos from '../component/todos.json';\n\n\n// mobx.configure({enforceActions: true});\n\nclass todoApp {\n    \n    @observable data = {\n        todos: [],\n        status: 'loading'\n    };\n\n    @observable idToUpdate: -1;\n    @observable wrongInput : false;\n\n    @action async listTodos() {\n        this.data.todos = [];\n        this.data.status = 'loading';\n        try {\n            const data = await this.getItems();\n            runInAction(() => {\n                this.data.todos = data;\n                this.data.status = 'done';\n            })\n        }\n        catch {\n            runInAction(() => {\n                this.data.status = 'error';\n            }) \n        }\n    }\n\n    @action changeDone = (id) => {\n        this.data.status = 'loading';\n\n        const index = this.data.todos.findIndex(item => item._id === id);\n        const newDone = {done: !this.data.todos[index].done}\n\n        this.patchItem(id, newDone).then(()=>{\n            runInAction(() => {\n                this.data.todos[index].done = newDone.done;\n                this.data.status = 'done'\n            })\n        })\n    }\n\n    @action addNewTodo = (newEntry) => {\n        const dateRegExp = /^\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;\n    \n        if(newEntry.description === '' || !dateRegExp.test(newEntry.deadline)) {\n            this.data.wrongInput = true\n        } else {\n            this.data.status = 'loading';\n            this.createNewItem(newEntry).then(()=>{\n                runInAction(() => {\n                    const lastItemId = this.data.todos[this.data.todos.length-1].id\n                    newEntry.id = lastItemId+1;\n                    newEntry.deadline = new Date(newEntry.deadline).toJSON();\n                    this.data.todos.push(newEntry);\n                    this.data.status = 'done';\n                    this.wrongInput = false;\n                })\n            })\n        }\n    }\n\n    @action deleteTodo = (index) => {    \n        this.data.todos.splice(index, 1);\n    }\n\n    @action editButton = (id) => {\n        this.idToUpdate = id\n    }\n\n    @action updateTodo = (select, id, newEntry) => {\n        if(select === 'cancel') {\n            this.idToUpdate = -1\n        } else {\n            this.data.status = 'loading';\n\n            const index = this.data.todos.findIndex(item => item._id === id);\n    \n            this.patchItem(id, newEntry).then(()=>{\n                runInAction(() => {\n                    this.data.todos[index].description = newEntry.description;\n                    this.data.todos[index].deadline = newEntry.deadline;\n                    this.data.status = 'done'\n                })\n            })\n\n            this.idToUpdate = -1\n        }\n    }\n\n    getItems() {\n        return fetch('https://hyf-react-api.herokuapp.com/todos')\n            .then(response => response.json())\n    }\n\n    createNewItem(item) {\n        return fetch('https://hyf-react-api.herokuapp.com/todos/create', {\n            method: 'POST',\n            body: JSON.stringify(item),\n            headers: {\n              \"Content-type\": \"application/json; charset=UTF-8\"\n            }\n          })\n          .then(response => response.json())\n    }\n\n    patchItem(id, item) {\n        return fetch(`https://hyf-react-api.herokuapp.com/todos/${id}`, {\n            method: 'PATCH',\n            body: JSON.stringify(item),\n            headers: {\n              \"Content-type\": \"application/json; charset=UTF-8\"\n            }\n          })\n          .then(response => response.json())        \n    }\n\n    deleteItem(id) {\n        return fetch(`https://hyf-react-api.herokuapp.com/todos/${id}`, {\n            method: 'DELETE'\n        })\n    }\n}\n\nconst myTodoApp = new todoApp();\n\nexport default myTodoApp;"]},"metadata":{},"sourceType":"module"}