{"ast":null,"code":"import _regeneratorRuntime from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _initializerDefineProperty from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _applyDecoratedDescriptor from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2;\n\nimport { configure, observable, action, runInAction } from 'mobx'; // import axios from \"axios\";\n\nconfigure({\n  enforceActions: 'observed'\n});\nvar houseApp = (_class =\n/*#__PURE__*/\nfunction () {\n  function houseApp() {\n    _classCallCheck(this, houseApp);\n\n    _initializerDefineProperty(this, \"output\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"addNewTodo\", _descriptor2, this);\n  }\n\n  _createClass(houseApp, [{\n    key: \"listHouses\",\n    value: function () {\n      var _listHouses = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(city) {\n        var _this = this;\n\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.output.houses = [];\n                this.output.status = 'loading';\n                _context.prev = 2;\n                _context.next = 5;\n                return this.getItems(city);\n\n              case 5:\n                data = _context.sent;\n                runInAction(function () {\n                  _this.output.houses = data.results;\n                  _this.output.status = 'done';\n                });\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](2);\n                runInAction(function () {\n                  _this.output.status = 'error';\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 9]]);\n      }));\n\n      return function listHouses(_x) {\n        return _listHouses.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getItems\",\n    value: function getItems(city) {\n      console.log(city);\n\n      if (city === undefined) {\n        console.log('if');\n        return fetch('/houses').then(function (response) {\n          return response.json();\n        });\n      } else {\n        console.log('else'); // return fetch(`/houses?city=${city}`)\n        //     .then(response => response.json());\n      } // switch (city) {\n      //     case 'amsterdam':\n      //         console.log('asd')\n      //         return fetch('/houses')\n      //             .then(response => response.json());\n      //     default:\n      //         return fetch('/houses')\n      //             .then(response => response.json());\n      // }\n\n    }\n  }, {\n    key: \"createNewItem\",\n    value: function createNewItem(item) {\n      return fetch('/houses/create', {\n        method: 'POST',\n        body: item,\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      });\n    }\n  }]);\n\n  return houseApp;\n}(), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"output\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {\n      houses: [],\n      status: 'loading'\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"listHouses\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"listHouses\"), _class.prototype), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"addNewTodo\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this2 = this;\n\n    return function (newEntry) {\n      // const newEntryJSON = JSON.parse(newEntry);\n      // this.output.status = 'loading';\n      _this2.createNewItem(newEntry); // .then(() => {\n      //         runInAction(() => {\n      //             this.output.houses.push(newEntry);\n      //             this.output.status = 'done';\n      //         })\n      //     })\n      //     .catch((error) => {\n      //         runInAction(() => {\n      //             this.output.status = 'error';\n      //         })\n      //     })\n\n    };\n  }\n})), _class);\nvar myHouseApp = new houseApp();\nexport default myHouseApp;","map":{"version":3,"sources":["/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/src/store/houseApp.js"],"names":["configure","observable","action","runInAction","enforceActions","houseApp","city","output","houses","status","getItems","data","results","console","log","undefined","fetch","then","response","json","item","method","body","headers","newEntry","createNewItem","myHouseApp"],"mappings":";;;;;;;;;;AAAA,SACIA,SADJ,EAEIC,UAFJ,EAGIC,MAHJ,EAIIC,WAJJ,QAKO,MALP,C,CAMA;;AAEAH,SAAS,CAAC;AACNI,EAAAA,cAAc,EAAE;AADV,CAAD,CAAT;IAIMC,Q;;;;;;;;;;;;;;;;gDAOuBC,I;;;;;;;;AACrB,qBAAKC,MAAL,CAAYC,MAAZ,GAAqB,EAArB;AACA,qBAAKD,MAAL,CAAYE,MAAZ,GAAqB,SAArB;;;uBAEuB,KAAKC,QAAL,CAAcJ,IAAd,C;;;AAAbK,gBAAAA,I;AACNR,gBAAAA,WAAW,CAAC,YAAM;AACd,kBAAA,KAAI,CAACI,MAAL,CAAYC,MAAZ,GAAqBG,IAAI,CAACC,OAA1B;AACA,kBAAA,KAAI,CAACL,MAAL,CAAYE,MAAZ,GAAqB,MAArB;AACH,iBAHU,CAAX;;;;;;;AAKAN,gBAAAA,WAAW,CAAC,YAAM;AACd,kBAAA,KAAI,CAACI,MAAL,CAAYE,MAAZ,GAAqB,OAArB;AACH,iBAFU,CAAX;;;;;;;;;;;;;;;;6BAMCH,I,EAAM;AACXO,MAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;;AACA,UAAGA,IAAI,KAAKS,SAAZ,EAAuB;AACnBF,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACA,eAAOE,KAAK,CAAC,SAAD,CAAL,CACEC,IADF,CACO,UAAAC,QAAQ;AAAA,iBAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,SADf,CAAP;AAEH,OAJD,MAIO;AACHN,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EADG,CAEC;AACA;AACP,OAVU,CAWX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACH;;;kCAmBaM,I,EAAM;AAChB,aAAOJ,KAAK,CAAC,gBAAD,EAAmB;AACvBK,QAAAA,MAAM,EAAE,MADe;AAEvBC,QAAAA,IAAI,EAAEF,IAFiB;AAGvBG,QAAAA,OAAO,EAAE;AACL,oBAAU,kBADL;AAEL,0BAAgB;AAFX;AAHc,OAAnB,CAAL,CAQFN,IARE,CAQG,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,OARX,CAAP;AASH;;;;2EAtEAlB,U;;;;;WAAoB;AACjBO,MAAAA,MAAM,EAAE,EADS;AAEjBC,MAAAA,MAAM,EAAE;AAFS,K;;+DAKpBP,M,iKAsCAA,M;;;;;;;WAAoB,UAACsB,QAAD,EAAc;AAC/B;AACA;AACA,MAAA,MAAI,CAACC,aAAL,CAAmBD,QAAnB,EAH+B,CAI/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACH,K;;;AAeL,IAAME,UAAU,GAAG,IAAIrB,QAAJ,EAAnB;AAEA,eAAeqB,UAAf","sourcesContent":["import {\n    configure,\n    observable,\n    action,\n    runInAction\n} from 'mobx';\n// import axios from \"axios\";\n\nconfigure({\n    enforceActions: 'observed'\n});\n\nclass houseApp {\n\n    @observable output = {\n        houses: [],\n        status: 'loading'\n    }\n\n    @action async listHouses(city) {\n        this.output.houses = [];\n        this.output.status = 'loading';\n        try {\n            const data = await this.getItems(city);\n            runInAction(() => {\n                this.output.houses = data.results;\n                this.output.status = 'done';\n            })\n        } catch (error) {\n            runInAction(() => {\n                this.output.status = 'error';\n            })\n        }\n    }\n\n    getItems(city) {\n        console.log(city)\n        if(city === undefined) {\n            console.log('if')\n            return fetch('/houses')\n                    .then(response => response.json());\n        } else {\n            console.log('else')\n                // return fetch(`/houses?city=${city}`)\n                //     .then(response => response.json());\n        }\n        // switch (city) {\n        //     case 'amsterdam':\n        //         console.log('asd')\n        //         return fetch('/houses')\n        //             .then(response => response.json());\n        //     default:\n        //         return fetch('/houses')\n        //             .then(response => response.json());\n        // }\n    }\n\n    @action addNewTodo = (newEntry) => {\n        // const newEntryJSON = JSON.parse(newEntry);\n        // this.output.status = 'loading';\n        this.createNewItem(newEntry)\n        // .then(() => {\n        //         runInAction(() => {\n        //             this.output.houses.push(newEntry);\n        //             this.output.status = 'done';\n        //         })\n        //     })\n        //     .catch((error) => {\n        //         runInAction(() => {\n        //             this.output.status = 'error';\n        //         })\n        //     })\n    }\n\n    createNewItem(item) {\n        return fetch('/houses/create', {\n                method: 'POST',\n                body: item,\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            })\n            .then(response => response.json())\n    }\n}\n\nconst myHouseApp = new houseApp();\n\nexport default myHouseApp;"]},"metadata":{},"sourceType":"module"}