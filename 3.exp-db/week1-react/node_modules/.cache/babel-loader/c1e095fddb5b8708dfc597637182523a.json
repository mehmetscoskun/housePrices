{"ast":null,"code":"import _regeneratorRuntime from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _initializerDefineProperty from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _applyDecoratedDescriptor from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2;\n\nimport { configure, observable, action, runInAction } from 'mobx';\nconfigure({\n  enforceActions: 'observed'\n});\nvar todoApp = (_class =\n/*#__PURE__*/\nfunction () {\n  function todoApp() {\n    _classCallCheck(this, todoApp);\n\n    _initializerDefineProperty(this, \"houses\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"addNewTodo\", _descriptor2, this);\n  }\n\n  _createClass(todoApp, [{\n    key: \"listTodos\",\n    value: function listTodos(data) {\n      var _this = this;\n\n      this.data.todos = {};\n      this.data.status = 'loading';\n\n      try {\n        // const data = await this.getItems();\n        runInAction(function () {\n          // console.log(data.results)\n          _this.data.todos = data; // console.log(this.data.todos)\n\n          _this.data.status = 'done';\n        });\n      } catch (error) {\n        runInAction(function () {\n          _this.data.status = 'error';\n        });\n      }\n    }\n  }, {\n    key: \"getItems\",\n    value: function () {\n      var _getItems = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _ref, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch('/houses');\n\n              case 2:\n                _ref = _context.sent;\n                data = _ref.data;\n                this.listTodos(data);\n                console.log();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function getItems() {\n        return _getItems.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"createNewItem\",\n    value: function createNewItem(item) {\n      return fetch('https://hyf-react-api.herokuapp.com/todos/create', {\n        method: 'POST',\n        body: JSON.stringify(item),\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      }).then(function (response) {\n        return response.json();\n      });\n    }\n  }]);\n\n  return todoApp;\n}(), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"houses\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {\n      todos: {},\n      status: 'loading'\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"listTodos\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"listTodos\"), _class.prototype), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"addNewTodo\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    var _this2 = this;\n\n    return function (newEntry) {\n      var dateRegExp = /^\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;\n\n      if (newEntry.description === '' || !dateRegExp.test(newEntry.deadline)) {\n        _this2.wrongInput = true;\n      } else {\n        _this2.data.status = 'loading';\n\n        _this2.createNewItem(newEntry).then(function () {\n          runInAction(function () {\n            newEntry.id = Math.random().toString(36).substr(2, 12);\n            newEntry.deadline = new Date(newEntry.deadline).toJSON();\n\n            _this2.data.todos.push(newEntry);\n\n            _this2.data.status = 'done';\n            _this2.wrongInput = false;\n          });\n        }).catch(function (error) {\n          runInAction(function () {\n            _this2.data.status = 'error';\n          });\n        });\n      }\n    };\n  }\n})), _class);\nvar myTodoApp = new todoApp();\nexport default myTodoApp;","map":{"version":3,"sources":["/home/mehmet/Desktop/HackYourFuture/housePrices/3.exp-db/week1-react/src/store/todoApp.js"],"names":["configure","observable","action","runInAction","enforceActions","todoApp","data","todos","status","error","fetch","listTodos","console","log","item","method","body","JSON","stringify","headers","then","response","json","newEntry","dateRegExp","description","test","deadline","wrongInput","createNewItem","id","Math","random","toString","substr","Date","toJSON","push","catch","myTodoApp"],"mappings":"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","sourcesContent":["import {configure, observable, action, runInAction} from 'mobx';\n\nconfigure({enforceActions: 'observed'});\n\nclass todoApp {\n    \n    @observable houses = {\n        todos: {},\n        status: 'loading'\n    };\n\n    @action listTodos(data) {\n        this.data.todos = {};\n        this.data.status = 'loading';\n        try {\n            // const data = await this.getItems();\n            runInAction(() => {\n                // console.log(data.results)\n                this.data.todos = data;\n                // console.log(this.data.todos)\n                this.data.status = 'done';\n            })\n        }\n        catch(error) {\n            runInAction(() => {\n                this.data.status = 'error';\n            }) \n        }\n    }\n\n    @action addNewTodo = (newEntry) => {\n        const dateRegExp = /^\\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;\n    \n        if(newEntry.description === '' || !dateRegExp.test(newEntry.deadline)) {\n            this.wrongInput = true\n        } else {\n            this.data.status = 'loading';\n            this.createNewItem(newEntry).then(()=>{\n                runInAction(() => {\n                    newEntry.id = Math.random().toString(36).substr(2, 12);\n                    newEntry.deadline = new Date(newEntry.deadline).toJSON();\n                    this.data.todos.push(newEntry);\n                    this.data.status = 'done';\n                    this.wrongInput = false;\n                })\n            })\n            .catch((error) => {\n                runInAction(() => {\n                    this.data.status = 'error';\n                }) \n            })\n        }\n    }\n\n    async getItems() {\n        const {data} = await fetch('/houses')\n        this.listTodos(data);\n        console.log()\n    }\n\n    createNewItem(item) {\n        return fetch('https://hyf-react-api.herokuapp.com/todos/create', {\n            method: 'POST',\n            body: JSON.stringify(item),\n            headers: {\n              \"Content-type\": \"application/json; charset=UTF-8\"\n            }\n          })\n          .then(response => response.json())\n    }\n\n}\n\nconst myTodoApp = new todoApp();\n\nexport default myTodoApp;"]},"metadata":{},"sourceType":"module"}